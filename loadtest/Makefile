.PHONY: run

BASE_URL ?= https://192.168.100.100
ADMIN_USER ?= admin
ADMIN_PASS ?= bierh0len!
WAITERS_LIST ?= t1:geh1,t2:geh2,t3:geh3,t4:geh4,t5:geh5,t6:geh6,t7:geh7,t8:geh8
INSECURE_TLS ?= 1
MIN_ORDERS ?= 50
DURATION_SECONDS ?= 20
CONCURRENCY ?= 8
RATE_PER_SEC ?= 2
PRINT_RATE ?= 0.5
CUSTOM_TABLE_RATE ?= 0.2
EXTRAS_RATE ?= 0.35

run:
	BASE_URL=$(BASE_URL) ADMIN_USER=$(ADMIN_USER) ADMIN_PASS=$(ADMIN_PASS) WAITERS_LIST=$(WAITERS_LIST) INSECURE_TLS=$(INSECURE_TLS) MIN_ORDERS=$(MIN_ORDERS) DURATION_SECONDS=$(DURATION_SECONDS) CONCURRENCY=$(CONCURRENCY) RATE_PER_SEC=$(RATE_PER_SEC) PRINT_RATE=$(PRINT_RATE) CUSTOM_TABLE_RATE=$(CUSTOM_TABLE_RATE) EXTRAS_RATE=$(EXTRAS_RATE) docker compose -f docker-compose.yml up --abort-on-container-exit --build
